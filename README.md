### KP-LITE - для киноманов
## Личный проект с микросервисной архитектурой (c) - Fogswimmer (Andrew Dyakov) 

## Команды Makefile

### 1. Базовые команды

| Команда        | Что делает                                           |
|----------------|------------------------------------------------------|
| `make up`      | Запускает контейнеры в фоне (`docker compose up -d`) |
| `make down`    | Останавливает и удаляет контейнеры                   |
| `make restart` | Перезапускает (down + up)                            |
| `make build`   | Сборка образов                                       |
| `make ps`      | Показывает список контейнеров                        |
| `make logs`    | Вывод логов всех сервисов в режиме live (`-f`)       |
| `make stop`    | Останавливает, но не удаляет контейнеры              |
| `make start`   | Запускает ранее остановленные контейнеры             |

---

### 2. Вход внутрь контейнера

| Команда                  | Что делает                                 |
|--------------------------|--------------------------------------------|
| `make exec SERVICE=name` | Выполнить `sh` внутри контейнера           |
| `make bash SERVICE=name` | Выполнить `bash` внутри контейнера         |
| `make sh SERVICE=name`   | То же самое, но через `sh` (если bash нет) |

---

### 3. Бэкап и восстановление БД

| Команда        | Что делает                    |
|----------------|-------------------------------|
| `make dump`    | Запускает скрипт `dump_db.sh` |
| `make restore` | Запускает скрипт `restore_db.sh` |

> Убедитесь, что скрипты `dump_db.sh` и `restore_db.sh` существуют и имеют права на исполнение:  
> `chmod +x dump_db.sh restore_db.sh`

---

### 4. Уборка

| Команда        | Что делает                                      |
|----------------|-------------------------------------------------|
| `make prune`   | Очищает ненужные Docker-ресурсы (`docker system prune -f`) |
| `make rebuild` | Полный пересоздание (удаляет volume'ы и orphan-контейнеры) |

---

## Пример `.env`

```env
DB_NAME=symfony
DB_USER=symfony
DB_PASSWORD=pg_password
DUMP_PATH=/path/to/project/dump.sql


